# 판다스 연습 튜토리얼

## 개요
데이터 분석의 필수 라이브러리인 Pandas를 이용한 데이터 조작 및 분석 실습 튜토리얼입니다.

## Getting & Knowing Data

### 1. 데이터 불러오기 및 기본 정보 확인

```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

# 샘플 데이터 생성 (실제로는 CSV 파일 로드)
np.random.seed(42)
data = {
    'Name': ['Alice', 'Bob', 'Charlie', 'Diana', 'Eve', 'Frank', 'Grace', 'Henry'],
    'Age': [25, 30, 35, 28, 32, 29, 27, 31],
    'City': ['Seoul', 'Busan', 'Seoul', 'Incheon', 'Seoul', 'Busan', 'Daegu', 'Seoul'],
    'Salary': [5000, 6000, 7500, 5500, 6800, 5800, 5200, 7000],
    'Department': ['IT', 'Finance', 'IT', 'HR', 'Finance', 'IT', 'HR', 'Finance']
}

df = pd.DataFrame(data)

# 기본 정보 확인
print("데이터 형태:", df.shape)
print("\n데이터 정보:")
print(df.info())
print("\n기술통계:")
print(df.describe())
```

```
데이터 형태: (8, 5)

데이터 정보:
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 8 entries, 0 to 7
Data columns (total 5 columns):
 #   Column      Non-Null Count  Dtype
---  ------      --------------  -----
 0   Name        8 non-null      object
 1   Age         8 non-null      int64
 2   City        8 non-null      object
 3   Salary      8 non-null      int64
 4   Department  8 non-null      object
dtypes: int64(2), object(3)
memory usage: 448.0 bytes
None

기술통계:
             Age       Salary
count   8.000000     8.000000
mean   29.625000  6100.000000
std     3.292887   874.500000
min    25.000000  5000.000000
25%    27.500000  5400.000000
50%    29.500000  5900.000000
75%    31.250000  6950.000000
max    35.000000  7500.000000
```

### 2. 데이터 확인 및 탐색

```python
# 상위 5개 행 확인
print("상위 5개 행:")
print(df.head())

print("\n컬럼명:")
print(df.columns.tolist())

print("\n각 컬럼의 유니크 값:")
for col in df.select_dtypes(include=['object']).columns:
    print(f"{col}: {df[col].unique()}")
```

```
상위 5개 행:
      Name  Age   City  Salary Department
0    Alice   25  Seoul    5000         IT
1      Bob   30  Busan    6000    Finance
2  Charlie   35  Seoul    7500         IT
3    Diana   28  Incheon  5500         HR
4      Eve   32  Seoul    6800    Finance

컬럼명:
['Name', 'Age', 'City', 'Salary', 'Department']

각 컬럼의 유니크 값:
Name: ['Alice' 'Bob' 'Charlie' 'Diana' 'Eve' 'Frank' 'Grace' 'Henry']
City: ['Seoul' 'Busan' 'Incheon' 'Daegu']
Department: ['IT' 'Finance' 'HR']
```

## Filtering & Sorting

### 3. 데이터 필터링

```python
# 조건부 필터링
print("나이가 30 이상인 직원:")
older_employees = df[df['Age'] >= 30]
print(older_employees)

print("\nSeoul에 거주하는 IT 부서 직원:")
seoul_it = df[(df['City'] == 'Seoul') & (df['Department'] == 'IT')]
print(seoul_it)

print("\n급여가 6000 이상이거나 HR 부서인 직원:")
high_salary_or_hr = df[(df['Salary'] >= 6000) | (df['Department'] == 'HR')]
print(high_salary_or_hr)
```

```
나이가 30 이상인 직원:
      Name  Age   City  Salary Department
1      Bob   30  Busan    6000    Finance
2  Charlie   35  Seoul    7500         IT
4      Eve   32  Seoul    6800    Finance
7    Henry   31  Seoul    7000    Finance

Seoul에 거주하는 IT 부서 직원:
      Name  Age   City  Salary Department
0    Alice   25  Seoul    5000         IT
2  Charlie   35  Seoul    7500         IT

급여가 6000 이상이거나 HR 부서인 직원:
      Name  Age     City  Salary Department
1      Bob   30    Busan    6000    Finance
2  Charlie   35    Seoul    7500         IT
3    Diana   28  Incheon    5500         HR
4      Eve   32    Seoul    6800    Finance
6    Grace   27    Daegu    5200         HR
7    Henry   31    Seoul    7000    Finance
```

### 4. 데이터 정렬

```python
# 급여 기준 내림차순 정렬
print("급여 기준 내림차순 정렬:")
df_sorted = df.sort_values('Salary', ascending=False)
print(df_sorted)

print("\n부서별, 나이 기준 정렬:")
df_multi_sort = df.sort_values(['Department', 'Age'])
print(df_multi_sort)
```

```
급여 기준 내림차순 정렬:
      Name  Age     City  Salary Department
2  Charlie   35    Seoul    7500         IT
7    Henry   31    Seoul    7000    Finance
4      Eve   32    Seoul    6800    Finance
1      Bob   30    Busan    6000    Finance
5    Frank   29    Busan    5800         IT
3    Diana   28  Incheon    5500         HR
6    Grace   27    Daegu    5200         HR
0    Alice   25    Seoul    5000         IT

부서별, 나이 기준 정렬:
      Name  Age   City  Salary Department
1      Bob   30  Busan    6000    Finance
4      Eve   32  Seoul    6800    Finance
7    Henry   31  Seoul    7000    Finance
3    Diana   28  Incheon  5500         HR
6    Grace   27  Daegu    5200         HR
0    Alice   25  Seoul    5000         IT
5    Frank   29  Busan    5800         IT
2  Charlie   35  Seoul    7500         IT
```

## Grouping

### 5. 그룹별 집계

```python
# 부서별 집계
print("부서별 평균 급여:")
dept_salary = df.groupby('Department')['Salary'].mean()
print(dept_salary)

print("\n부서별 직원 수:")
dept_count = df.groupby('Department').size()
print(dept_count)

print("\n부서별 상세 통계:")
dept_stats = df.groupby('Department')['Salary'].agg(['count', 'mean', 'std', 'min', 'max'])
print(dept_stats)
```

```
부서별 평균 급여:
Department
Finance    6600.0
HR         5350.0
IT         6100.0
Name: Salary, dtype: float64

부서별 직원 수:
Department
Finance    3
HR         2
IT         3
dtype: int64

부서별 상세 통계:
            count    mean         std   min   max
Department
Finance         3  6600.0  500.000000  6000  7000
HR              2  5350.0  212.132034  5200  5500
IT              3  6100.0 1322.875656  5000  7500
```

### 6. 그룹별 시각화

```python
# 부서별 급여 분포 시각화
plt.figure(figsize=(12, 5))

# 부서별 평균 급여 막대그래프
plt.subplot(1, 2, 1)
dept_salary.plot(kind='bar', color=['skyblue', 'lightcoral', 'lightgreen'])
plt.title('부서별 평균 급여')
plt.xlabel('부서')
plt.ylabel('평균 급여')
plt.xticks(rotation=45)
plt.grid(True, alpha=0.3)

# 도시별 급여 분포 박스플롯
plt.subplot(1, 2, 2)
df.boxplot(column='Salary', by='City', ax=plt.gca())
plt.title('도시별 급여 분포')
plt.suptitle('')  # 기본 제목 제거
plt.xlabel('도시')
plt.ylabel('급여')
plt.xticks(rotation=45)

plt.tight_layout()
plt.show()
```

## Apply & Map

### 7. Apply 함수 활용

```python
# 새로운 컬럼 생성: 급여 등급
def salary_grade(salary):
    if salary >= 7000:
        return 'High'
    elif salary >= 6000:
        return 'Medium'
    else:
        return 'Low'

df['Salary_Grade'] = df['Salary'].apply(salary_grade)
print("급여 등급 추가:")
print(df[['Name', 'Salary', 'Salary_Grade']])

# 그룹별 apply 활용
print("\n부서별 급여 표준화:")
def standardize(group):
    return (group - group.mean()) / group.std()

df['Salary_Standardized'] = df.groupby('Department')['Salary'].apply(standardize)
print(df[['Name', 'Department', 'Salary', 'Salary_Standardized']].round(3))
```

```
급여 등급 추가:
      Name  Salary Salary_Grade
0    Alice    5000          Low
1      Bob    6000       Medium
2  Charlie    7500         High
3    Diana    5500          Low
4      Eve    6800       Medium
5    Frank    5800          Low
6    Grace    5200          Low
7    Henry    7000         High

부서별 급여 표준화:
      Name Department  Salary  Salary_Standardized
0    Alice         IT    5000               -0.832
1      Bob    Finance    6000               -1.200
2  Charlie         IT    7500                1.134
3    Diana         HR    5500               0.707
4      Eve    Finance    6800                0.400
5    Frank         IT    5800               -0.302
6    Grace         HR    5200               -0.707
7    Henry    Finance    7000                0.800
```

### 8. Map 함수 활용

```python
# 부서 코드 매핑
dept_codes = {'IT': 'I001', 'Finance': 'F001', 'HR': 'H001'}
df['Dept_Code'] = df['Department'].map(dept_codes)

# 도시 코드 매핑
city_codes = {'Seoul': 'SE', 'Busan': 'BS', 'Incheon': 'IC', 'Daegu': 'DG'}
df['City_Code'] = df['City'].map(city_codes)

print("코드 매핑 결과:")
print(df[['Name', 'Department', 'Dept_Code', 'City', 'City_Code']])
```

```
코드 매핑 결과:
      Name Department Dept_Code     City City_Code
0    Alice         IT      I001    Seoul        SE
1      Bob    Finance      F001    Busan        BS
2  Charlie         IT      I001    Seoul        SE
3    Diana         HR      H001  Incheon        IC
4      Eve    Finance      F001    Seoul        SE
5    Frank         IT      I001    Busan        BS
6    Grace         HR      H001    Daegu        DG
7    Henry    Finance      F001    Seoul        SE
```

## Pivot

### 9. 피벗 테이블 생성

```python
# 부서와 도시별 평균 급여 피벗 테이블
pivot_salary = df.pivot_table(values='Salary',
                             index='Department',
                             columns='City',
                             aggfunc='mean',
                             fill_value=0)
print("부서-도시별 평균 급여 피벗 테이블:")
print(pivot_salary)

# 부서별 급여 등급 분포
pivot_grade = df.pivot_table(values='Name',
                            index='Department',
                            columns='Salary_Grade',
                            aggfunc='count',
                            fill_value=0)
print("\n부서별 급여 등급 분포:")
print(pivot_grade)
```

```
부서-도시별 평균 급여 피벗 테이블:
City        Busan  Daegu  Incheon  Seoul
Department
Finance      6000      0        0   6900
HR              0   5200     5500      0
IT           5800      0        0   6250

부서별 급여 등급 분포:
Salary_Grade  High  Low  Medium
Department
Finance          1    0       2
HR               0    2       0
IT               1    2       0
```

### 10. 피벗 테이블 시각화

```python
import seaborn as sns

plt.figure(figsize=(12, 8))

# 히트맵으로 피벗 테이블 시각화
plt.subplot(2, 2, 1)
sns.heatmap(pivot_salary, annot=True, fmt='.0f', cmap='YlOrRd')
plt.title('부서-도시별 평균 급여')

# 부서별 급여 분포
plt.subplot(2, 2, 2)
df.groupby('Department')['Salary'].mean().plot(kind='bar', color='lightblue')
plt.title('부서별 평균 급여')
plt.ylabel('급여')
plt.xticks(rotation=45)

# 급여 등급별 분포
plt.subplot(2, 2, 3)
df['Salary_Grade'].value_counts().plot(kind='pie', autopct='%1.1f%%')
plt.title('급여 등급 분포')

# 나이와 급여 산점도
plt.subplot(2, 2, 4)
colors = {'IT': 'red', 'Finance': 'blue', 'HR': 'green'}
for dept in df['Department'].unique():
    dept_data = df[df['Department'] == dept]
    plt.scatter(dept_data['Age'], dept_data['Salary'],
               label=dept, color=colors[dept], alpha=0.7, s=60)
plt.xlabel('나이')
plt.ylabel('급여')
plt.title('나이별 급여 분포 (부서별)')
plt.legend()
plt.grid(True, alpha=0.3)

plt.tight_layout()
plt.show()
```

## 연습문제

:::note[연습문제 1: Getting & Knowing Data]
다음 조건에 맞는 코드를 작성하시오:
1. DataFrame의 기본 정보를 확인하는 방법 3가지를 적으시오
2. 결측치를 확인하는 방법을 적으시오
:::

<CollapsibleCodeCell language="python" defaultCollapsed={true}>
```python
# 해답
# 1. DataFrame 기본 정보 확인
print("1. 데이터 형태:", df.shape)
print("2. 데이터 정보:", df.info())
print("3. 기술통계:", df.describe())

# 2. 결측치 확인
print("결측치 개수:", df.isnull().sum())
print("결측치 있는 행:", df.isnull().any(axis=1).sum())
```
</CollapsibleCodeCell>

:::note[연습문제 2: Filtering & Sorting]
다음 조건을 만족하는 데이터를 필터링하시오:
1. 나이가 25-30세 사이인 직원
2. 급여가 상위 30%에 해당하는 직원
3. 이름이 'A'로 시작하는 직원
:::

<CollapsibleCodeCell language="python" defaultCollapsed={true}>
```python
# 해답
# 1. 나이 25-30세 사이
age_filter = df[(df['Age'] >= 25) & (df['Age'] <= 30)]
print("1. 나이 25-30세:", age_filter['Name'].tolist())

# 2. 급여 상위 30%
salary_70th = df['Salary'].quantile(0.7)
top_salary = df[df['Salary'] >= salary_70th]
print("2. 급여 상위 30%:", top_salary['Name'].tolist())

# 3. 이름이 'A'로 시작
name_a = df[df['Name'].str.startswith('A')]
print("3. 이름 A로 시작:", name_a['Name'].tolist())
```
</CollapsibleCodeCell>

:::note[연습문제 3: Grouping]
다음 그룹별 분석을 수행하시오:
1. 도시별 평균 나이와 평균 급여
2. 부서별 급여 분산
3. 도시-부서 조합별 직원 수
:::

<CollapsibleCodeCell language="python" defaultCollapsed={true}>
```python
# 해답
# 1. 도시별 평균 나이와 평균 급여
city_stats = df.groupby('City')[['Age', 'Salary']].mean()
print("1. 도시별 평균:", city_stats)

# 2. 부서별 급여 분산
dept_var = df.groupby('Department')['Salary'].var()
print("2. 부서별 급여 분산:", dept_var)

# 3. 도시-부서 조합별 직원 수
city_dept_count = df.groupby(['City', 'Department']).size()
print("3. 도시-부서별 직원 수:", city_dept_count)
```
</CollapsibleCodeCell>

## 참고자료

- [Pandas 공식 문서](https://pandas.pydata.org/docs/)
- [10 Minutes to pandas](https://pandas.pydata.org/docs/user_guide/10min.html)
- [Pandas Cheat Sheet](https://pandas.pydata.org/Pandas_Cheat_Sheet.pdf)

## 데이터 출처

- 본 튜토리얼의 예제 데이터는 학습 목적으로 임의로 생성된 데이터입니다
- 실제 분석에서는 실무 데이터를 활용하여 동일한 기법을 적용할 수 있습니다