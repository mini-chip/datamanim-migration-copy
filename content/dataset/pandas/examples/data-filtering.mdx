# Pandas 예제문제 1 - 데이터 필터링

## 문제 설명

다양한 조건을 이용하여 DataFrame의 데이터를 필터링하는 방법을 학습하시오.

## 데이터 준비

```python
import pandas as pd
import numpy as np

# 샘플 데이터 생성
np.random.seed(42)
n = 100

data = {
    'name': [f'학생{i+1}' for i in range(n)],
    'age': np.random.randint(18, 25, n),
    'gender': np.random.choice(['남', '여'], n),
    'department': np.random.choice(['컴퓨터과학', '경영학', '수학', '물리학'], n),
    'grade': np.random.choice(['1학년', '2학년', '3학년', '4학년'], n),
    'score': np.random.normal(75, 15, n).round(1),
    'attendance': np.random.uniform(0.7, 1.0, n).round(2),
    'scholarship': np.random.choice([True, False], n, p=[0.3, 0.7])
}

df = pd.DataFrame(data)
print("데이터 기본정보:")
print(df.head())
print(f"\n데이터 크기: {df.shape}")
print(f"\n데이터 타입:")
print(df.dtypes)
```

## 문제 1: 기본 필터링

**Q1-1.** 점수가 80점 이상인 학생들을 조회하시오.

<CollapsibleCodeCell code={`print(f"\n전체 학생 중 80점 이상: {percentage:.1f}%")`} />

**Q1-2.** 컴퓨터과학과 학생들만 조회하시오.

<CollapsibleCodeCell code={`print(f"\n컴퓨터과학과 평균 점수: {cs_avg_score:.1f}점")`} />

## 문제 2: 복합 조건 필터링

**Q2-1.** 점수가 80점 이상이면서 출석률이 90% 이상인 학생을 조회하시오.

<CollapsibleCodeCell code={`print(dept_distribution)`} />

**Q2-2.** 1학년이거나 4학년인 학생들을 조회하시오.

<CollapsibleCodeCell code={`print(grade_stats.round(2))`} />

## 문제 3: isin() 메서드 활용

**Q3-1.** 특정 학과(컴퓨터과학, 수학) 학생들을 조회하시오.

<CollapsibleCodeCell code={`print(top5[['name', 'score', 'attendance']].to_string(index=False))`} />

## 문제 4: 문자열 필터링

**Q4-1.** 이름에 특정 문자가 포함된 학생을 조회하시오.

<CollapsibleCodeCell code={`print(students_pattern[['name', 'score']].head())`} />

## 문제 5: 결측값 필터링

**Q5-1.** 결측값이 없는 완전한 데이터만 조회하시오.

<CollapsibleCodeCell code={`print(f"\n점수가 결측이 아닌 학생 수: {len(score_not_null)}명")`} />

## 문제 6: query() 메서드 활용

**Q6-1.** query() 메서드를 사용하여 복합 조건 필터링을 수행하시오.

<CollapsibleCodeCell code={`print(dept_analysis.round(2))`} />

## 문제 7: 분위수 기반 필터링

**Q7-1.** 점수 상위 25%에 해당하는 학생들을 조회하시오.

<CollapsibleCodeCell code={`print(outliers[['name', 'score', 'department']])`} />

## 문제 8: 조건부 집계

**Q8-1.** 각 조건별로 학생 수와 평균 점수를 집계하시오.

<CollapsibleCodeCell code={`print(scholarship_by_grade)`} />

## 종합 정리

:::note[학습 요약]
이 예제에서 다룬 주요 내용:

1. **기본 필터링**: 단일 조건으로 데이터 선택
2. **복합 조건**: &(and), |(or) 연산자 활용
3. **isin() 메서드**: 여러 값에 대한 필터링
4. **문자열 필터링**: contains(), match() 메서드
5. **결측값 처리**: dropna(), notna() 활용
6. **query() 메서드**: SQL-like 문법으로 필터링
7. **분위수 기반**: quantile() 활용한 구간 설정
8. **조건부 집계**: groupby()와 agg() 조합
:::

:::warning[필터링 주의사항]
- **체이닝 주의**: 여러 조건을 연결할 때 괄호 사용 필수
- **데이터 타입**: 필터링 전 데이터 타입 확인 중요
- **성능 고려**: 대용량 데이터에서는 query() 메서드가 더 효율적
- **결측값 처리**: 비교 연산 시 NaN 값 고려 필요
:::

## 참고자료

- Pandas 공식 문서 - Indexing and Selecting Data
- 『파이썬 라이브러리를 활용한 데이터 분석』, 웨스 맥키니