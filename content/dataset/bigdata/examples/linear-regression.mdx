# 예제문제 1 - 선형회귀

## 문제 설명

아래 데이터를 이용하여 선형회귀 모델을 구축하고 성능을 평가하시오.

### 데이터 정보
- **독립변수**: 경력년수 (years_experience)
- **종속변수**: 연봉 (salary)
- **목표**: 경력년수를 이용해 연봉을 예측하는 모델 구축

## 데이터 준비

```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from sklearn.linear_model import LinearRegression
from sklearn.model_selection import train_test_split
from sklearn.metrics import mean_squared_error, r2_score, mean_absolute_error

# 샘플 데이터 생성
np.random.seed(42)
data = {
    'years_experience': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
    'salary': [35000, 40000, 45000, 50000, 55000, 65000, 70000, 75000, 80000,
               85000, 90000, 95000, 100000, 105000, 110000]
}

df = pd.DataFrame(data)
print("데이터 확인:")
print(df.head())
print(f"\n데이터 크기: {df.shape}")
```

```
데이터 확인:
   years_experience  salary
0                 1   35000
1                 2   40000
2                 3   45000
3                 4   50000
4                 5   55000

데이터 크기: (15, 2)
```

## 문제 1: 데이터 탐색 및 시각화

**Q1-1.** 경력년수와 연봉 간의 상관계수를 구하시오.

<CollapsibleCodeCell code={`# 상관계수 계산
correlation = df['years_experience'].corr(df['salary'])
print(f"상관계수: {correlation:.4f}")

# 산점도 그리기
plt.figure(figsize=(10, 6))
plt.scatter(df['years_experience'], df['salary'], alpha=0.7, color='blue')
plt.xlabel('경력년수')
plt.ylabel('연봉')
plt.title('경력년수 vs 연봉')
plt.grid(True, alpha=0.3)
plt.show()`} />

**Q1-2.** 기술통계량을 확인하시오.

<CollapsibleCodeCell code={`print(f"연봉 - 평균: {df['salary'].mean():.2f}, 표준편차: {df['salary'].std():.2f}")`} />

## 문제 2: 모델 구축 및 학습

**Q2-1.** 데이터를 훈련용과 테스트용으로 8:2 비율로 분할하시오.

<CollapsibleCodeCell code={`print(f"테스트 데이터 크기: {X_test.shape}")`} />

**Q2-2.** 선형회귀 모델을 학습시키고 회귀계수와 절편을 구하시오.

<CollapsibleCodeCell code={`print(f"회귀식: y = {model.coef_[0]:.2f}x + {model.intercept_:.2f}")`} />

## 문제 3: 모델 평가

**Q3-1.** 테스트 데이터에 대한 예측을 수행하고 평가지표를 계산하시오.

<CollapsibleCodeCell code={`print(f"R² (결정계수): {r2:.4f}")`} />

**Q3-2.** 예측 결과를 시각화하시오.

<CollapsibleCodeCell code={`plt.show()`} />

## 문제 4: 새로운 데이터 예측

**Q4-1.** 경력 16년인 직원의 예상 연봉을 예측하시오.

<CollapsibleCodeCell code={`print(f"95% 신뢰구간: {predicted_salary[0] - 1.96*std_error:,.0f} ~ {predicted_salary[0] + 1.96*std_error:,.0f}원")`} />

## 문제 5: 잔차 분석

**Q5-1.** 잔차를 계산하고 잔차 플롯을 그려 모델의 적합성을 검토하시오.

<CollapsibleCodeCell code={`print(f"잔차 표준편차: {residuals_all.std():.2f}")`} />

## 종합 정리

:::note[학습 요약]
이 예제에서 다룬 주요 내용:

1. **데이터 탐색**: 상관분석, 기술통계량
2. **모델 구축**: 선형회귀 모델 학습
3. **모델 평가**: MSE, RMSE, MAE, R² 계산
4. **시각화**: 산점도, 회귀선, 잔차 플롯
5. **예측**: 새로운 데이터에 대한 예측 수행
:::

:::warning[주의사항]
- 선형회귀는 선형 관계를 가정하므로 비선형 관계에는 적합하지 않음
- 이상치에 민감하므로 데이터 전처리가 중요
- 다중공선성 문제를 고려해야 함
:::

## 참고자료

- scikit-learn Linear Regression 문서
- 『파이썬 머신러닝 완벽 가이드』, 권철민
- 『Introduction to Statistical Learning』, James et al.